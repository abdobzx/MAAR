<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2024-12-07T12:00:00.000Z" agent="5.0" etag="xyz" version="22.1.8" type="device">
  <diagram name="RAG-Enterprise-Architecture" id="architecture-diagram">
    <mxGraphModel dx="2336" dy="1654" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2336" pageHeight="1654" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- Title -->
        <mxCell id="title" value="SystÃ¨me RAG Enterprise Multi-Agents - Architecture ComplÃ¨te" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=28;fontStyle=1;fontColor=#1976D2;" vertex="1" parent="1">
          <mxGeometry x="668" y="20" width="1000" height="60" as="geometry"/>
        </mxCell>

        <!-- Client Layer -->
        <mxCell id="client-header" value="COUCHE CLIENT" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="100" width="300" height="40" as="geometry"/>
        </mxCell>
        
        <mxCell id="web-client" value="ðŸŒ Interface Web&#xa;React/Vue.js SPA&#xa;â€¢ Authentication&#xa;â€¢ File Upload&#xa;â€¢ Chat Interface&#xa;â€¢ Real-time Updates" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="80" y="160" width="140" height="80" as="geometry"/>
        </mxCell>
        
        <mxCell id="mobile-client" value="ðŸ“± App Mobile&#xa;React Native&#xa;â€¢ Cross-Platform&#xa;â€¢ Offline Mode&#xa;â€¢ Push Notifications" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="240" y="160" width="140" height="80" as="geometry"/>
        </mxCell>

        <!-- Load Balancer -->
        <mxCell id="loadbalancer" value="âš–ï¸ Load Balancer&#xa;NGINX/HAProxy&#xa;â€¢ SSL Termination&#xa;â€¢ Rate Limiting&#xa;â€¢ Health Checks&#xa;â€¢ Geographic Routing" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#388E3C;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="160" width="160" height="80" as="geometry"/>
        </mxCell>

        <!-- API Gateway -->
        <mxCell id="api-header" value="COUCHE API GATEWAY" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="680" y="100" width="320" height="40" as="geometry"/>
        </mxCell>
        
        <mxCell id="api-gateway" value="ðŸš€ FastAPI Gateway&#xa;main.py&#xa;â€¢ Authentication &amp; Authorization&#xa;â€¢ Request Validation&#xa;â€¢ Rate Limiting &amp; CORS&#xa;â€¢ Health Monitoring&#xa;â€¢ API Documentation&#xa;â€¢ WebSocket Support" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#F57C00;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="680" y="160" width="320" height="80" as="geometry"/>
        </mxCell>

        <!-- Multi-Agent System Header -->
        <mxCell id="agents-header" value="SYSTÃˆME MULTI-AGENTS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#7B1FA2;fontSize=18;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="280" width="1400" height="40" as="geometry"/>
        </mxCell>

        <!-- Central Orchestration Agent -->
        <mxCell id="orchestrator" value="ðŸŽ­ AGENT ORCHESTRATEUR&#xa;orchestration/agent.py&#xa;â€¢ CrewAI Coordination&#xa;â€¢ LangGraph Workflows&#xa;â€¢ SothemaAI Integration&#xa;â€¢ Task Management&#xa;â€¢ Process Monitoring&#xa;â€¢ Error Handling &amp; Recovery" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1BEE7;strokeColor=#7B1FA2;fontSize=13;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="620" y="340" width="280" height="100" as="geometry"/>
        </mxCell>

        <!-- Specialized Agents -->
        <mxCell id="ingestion-agent" value="ðŸ“¥ AGENT INGESTION&#xa;ingestion/agent.py&#xa;â€¢ PDF, DOCX, TXT Processing&#xa;â€¢ OCR for Images&#xa;â€¢ Audio Transcription&#xa;â€¢ Content Extraction&#xa;â€¢ Format Validation&#xa;â€¢ Metadata Extraction" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#4CAF50;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="80" y="470" width="180" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="vectorization-agent" value="ðŸ§® AGENT VECTORISATION&#xa;vectorization/agent.py&#xa;â€¢ Intelligent Text Chunking&#xa;â€¢ Embeddings Generation&#xa;â€¢ Vector Optimization&#xa;â€¢ Semantic Analysis&#xa;â€¢ Index Management&#xa;â€¢ Quality Validation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#FBC02D;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="280" y="470" width="180" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="storage-agent" value="ðŸ’¾ AGENT STOCKAGE&#xa;storage/agent.py&#xa;â€¢ Document Persistence&#xa;â€¢ Metadata Management&#xa;â€¢ Index Management&#xa;â€¢ CRUD Operations&#xa;â€¢ Data Integrity&#xa;â€¢ Backup Management" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#2196F3;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="980" y="470" width="180" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="retrieval-agent" value="ðŸ” AGENT RÃ‰CUPÃ‰RATION&#xa;retrieval/agent.py&#xa;â€¢ Hybrid Search Engine&#xa;â€¢ Vector Similarity Search&#xa;â€¢ Keyword Matching&#xa;â€¢ Context Ranking&#xa;â€¢ Result Filtering&#xa;â€¢ Relevance Scoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#E91E63;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1180" y="470" width="180" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="synthesis-agent" value="âœï¸ AGENT SYNTHÃˆSE&#xa;synthesis/agent.py&#xa;â€¢ Response Generation&#xa;â€¢ Multi-LLM Integration&#xa;â€¢ Context Enrichment&#xa;â€¢ Answer Validation&#xa;â€¢ Citation Management&#xa;â€¢ Streaming Support" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FF9800;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1380" y="470" width="180" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="feedback-agent" value="ðŸ§  AGENT FEEDBACK&#xa;feedback/agent.py&#xa;â€¢ Learning Memory&#xa;â€¢ User Feedback Analysis&#xa;â€¢ Performance Analytics&#xa;â€¢ Continuous Learning&#xa;â€¢ Model Fine-tuning&#xa;â€¢ Insight Generation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#EFEBE9;strokeColor=#8D6E63;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="480" y="470" width="180" height="100" as="geometry"/>
        </mxCell>

        <!-- Support Systems -->
        <mxCell id="ai-provider" value="ðŸ¤– AI PROVIDER MANAGER&#xa;core/providers/&#xa;â€¢ SothemaAI Integration&#xa;â€¢ Multi-Model Support&#xa;â€¢ Fallback Strategy&#xa;â€¢ Load Balancing&#xa;â€¢ Performance Monitoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3F51B5;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="680" y="470" width="180" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="celery-workers" value="ðŸŒ¿ CELERY WORKERS&#xa;tasks/&#xa;â€¢ Background Processing&#xa;â€¢ Distributed Tasks&#xa;â€¢ Queue Management&#xa;â€¢ Worker Scaling&#xa;â€¢ Task Monitoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#F44336;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="80" y="600" width="180" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="security-module" value="ðŸ›¡ï¸ SECURITY MODULE&#xa;security/auth.py&#xa;â€¢ JWT Authentication&#xa;â€¢ RBAC Permissions&#xa;â€¢ Rate Limiting&#xa;â€¢ Audit Logging&#xa;â€¢ Data Encryption" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#D32F2F;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="280" y="600" width="180" height="80" as="geometry"/>
        </mxCell>

        <!-- Data Layer -->
        <mxCell id="data-header" value="COUCHE DONNÃ‰ES &amp; STOCKAGE" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#D32F2F;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="720" width="1400" height="40" as="geometry"/>
        </mxCell>

        <mxCell id="postgresql" value="ðŸ˜ PostgreSQL&#xa;â€¢ Documents Metadata&#xa;â€¢ User Management&#xa;â€¢ Organizations&#xa;â€¢ Audit Logs&#xa;â€¢ Configurations&#xa;â€¢ Relationships" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#D32F2F;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="80" y="780" width="160" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="qdrant" value="ðŸ”º Qdrant Vector DB&#xa;â€¢ Vector Storage&#xa;â€¢ Semantic Search&#xa;â€¢ Index Management&#xa;â€¢ Similarity Queries&#xa;â€¢ Collection Management&#xa;â€¢ High Performance" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3F51B5;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="260" y="780" width="160" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="redis" value="ðŸ”´ Redis&#xa;â€¢ Session Management&#xa;â€¢ Query Results Cache&#xa;â€¢ Rate Limiting Counters&#xa;â€¢ Background Job Queue&#xa;â€¢ Real-time Data" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FCE4EC;strokeColor=#E91E63;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="440" y="780" width="160" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="minio" value="ðŸª£ MinIO Object Storage&#xa;â€¢ Document Files&#xa;â€¢ Media Assets&#xa;â€¢ Backup Archives&#xa;â€¢ Binary Data&#xa;â€¢ Version Control&#xa;â€¢ S3 Compatible" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0F2F1;strokeColor=#00796B;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="620" y="780" width="160" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="elasticsearch" value="ðŸ” Elasticsearch&#xa;â€¢ Full-text Search&#xa;â€¢ Log Analytics&#xa;â€¢ Monitoring Data&#xa;â€¢ Search Analytics&#xa;â€¢ Text Indexing&#xa;â€¢ Advanced Queries" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#F57F17;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="800" y="780" width="160" height="100" as="geometry"/>
        </mxCell>

        <!-- External AI Services -->
        <mxCell id="external-header" value="SERVICES IA EXTERNES" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F1F8E9;strokeColor=#689F38;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="920" width="1400" height="40" as="geometry"/>
        </mxCell>

        <mxCell id="sothema-ai" value="ðŸ§  SothemaAI (Primaire)&#xa;â€¢ Mistral Models&#xa;â€¢ Llama4 Models&#xa;â€¢ Custom Fine-tuning&#xa;â€¢ Local Deployment&#xa;â€¢ High Performance&#xa;â€¢ Enterprise Support" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#388E3C;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="980" width="200" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="openai" value="ðŸ¤– OpenAI&#xa;â€¢ GPT-4 Turbo&#xa;â€¢ GPT-3.5 Turbo&#xa;â€¢ Text Embeddings&#xa;â€¢ Function Calling&#xa;â€¢ Streaming API" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="300" y="980" width="140" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="anthropic" value="ðŸŽ­ Anthropic&#xa;â€¢ Claude 3.5 Sonnet&#xa;â€¢ Claude 3 Haiku&#xa;â€¢ Constitutional AI&#xa;â€¢ Long Context&#xa;â€¢ Safety Features" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#F57C00;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="460" y="980" width="140" height="100" as="geometry"/>
        </mxCell>

        <mxCell id="cohere" value="ðŸ”® Cohere&#xa;â€¢ Command R+&#xa;â€¢ Embed v3&#xa;â€¢ Rerank v3&#xa;â€¢ Multilingual&#xa;â€¢ Enterprise Ready" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#9C27B0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="620" y="980" width="140" height="100" as="geometry"/>
        </mxCell>

        <!-- Monitoring & Security -->
        <mxCell id="monitoring-header" value="MONITORING &amp; SÃ‰CURITÃ‰" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ECEFF1;strokeColor=#455A64;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="1120" width="1400" height="40" as="geometry"/>
        </mxCell>

        <mxCell id="prometheus" value="ðŸ“Š Prometheus&#xa;â€¢ Metrics Collection&#xa;â€¢ Time Series DB&#xa;â€¢ Alerting Rules&#xa;â€¢ Performance Monitoring&#xa;â€¢ Custom Metrics" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#4CAF50;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="80" y="1180" width="140" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="grafana" value="ðŸ“ˆ Grafana&#xa;â€¢ Visual Dashboards&#xa;â€¢ Real-time Monitoring&#xa;â€¢ Alerts Management&#xa;â€¢ Data Visualization&#xa;â€¢ Custom Panels" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FF9800;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="240" y="1180" width="140" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="elk-stack" value="ðŸ“‹ ELK Stack&#xa;â€¢ Log Aggregation&#xa;â€¢ Search &amp; Analytics&#xa;â€¢ Kibana Dashboards&#xa;â€¢ Log Correlation&#xa;â€¢ Error Tracking" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#F57F17;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="400" y="1180" width="140" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="keycloak" value="ðŸ” Keycloak&#xa;â€¢ SSO Authentication&#xa;â€¢ RBAC Authorization&#xa;â€¢ SAML/OIDC&#xa;â€¢ Identity Management&#xa;â€¢ User Federation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#F44336;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="560" y="1180" width="140" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="vault" value="ðŸ—ï¸ HashiCorp Vault&#xa;â€¢ Secrets Management&#xa;â€¢ Certificate Authority&#xa;â€¢ Data Encryption&#xa;â€¢ Key Rotation&#xa;â€¢ Audit Trails" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0288D1;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="720" y="1180" width="140" height="80" as="geometry"/>
        </mxCell>

        <!-- Infrastructure -->
        <mxCell id="infra-header" value="INFRASTRUCTURE &amp; DÃ‰PLOIEMENT" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#388E3C;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="1300" width="1400" height="40" as="geometry"/>
        </mxCell>

        <mxCell id="docker" value="ðŸ³ Docker&#xa;â€¢ Containerization&#xa;â€¢ Multi-stage Builds&#xa;â€¢ Image Optimization&#xa;â€¢ Development Environment" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="80" y="1360" width="140" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="kubernetes" value="â˜¸ï¸ Kubernetes&#xa;â€¢ Container Orchestration&#xa;â€¢ Auto-scaling&#xa;â€¢ Service Mesh&#xa;â€¢ Rolling Updates&#xa;â€¢ Health Checks" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#4CAF50;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="240" y="1360" width="140" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="helm" value="âš“ Helm&#xa;â€¢ Package Management&#xa;â€¢ Chart Templates&#xa;â€¢ Release Management&#xa;â€¢ Configuration Management" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FF9800;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="400" y="1360" width="140" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="nginx-ingress" value="ðŸŒ NGINX Ingress&#xa;â€¢ Load Balancing&#xa;â€¢ SSL Termination&#xa;â€¢ Path Routing&#xa;â€¢ Traffic Management" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#388E3C;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="560" y="1360" width="140" height="80" as="geometry"/>
        </mxCell>

        <!-- Information Panels -->
        <mxCell id="performance-metrics" value="MÃ‰TRIQUES PERFORMANCE&#xa;â€¢ API Response: &lt;200ms (P95)&#xa;â€¢ Vector Search: &lt;100ms (P95)&#xa;â€¢ Throughput: 1000+ req/s&#xa;â€¢ Availability: 99.9% SLA&#xa;â€¢ Document Processing: 50/min&#xa;â€¢ Concurrent Users: 1000+" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#4CAF50;align=left;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1000" y="780" width="200" height="120" as="geometry"/>
        </mxCell>

        <mxCell id="tech-stack" value="STACK TECHNOLOGIQUE&#xa;â€¢ Python 3.11+ / FastAPI&#xa;â€¢ CrewAI + LangChain&#xa;â€¢ SothemaAI (Primaire)&#xa;â€¢ Docker + Kubernetes&#xa;â€¢ PostgreSQL + Qdrant&#xa;â€¢ Redis + MinIO&#xa;â€¢ Prometheus + Grafana" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;align=left;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1220" y="780" width="180" height="120" as="geometry"/>
        </mxCell>

        <mxCell id="deployment-info" value="ENVIRONNEMENTS&#xa;â€¢ Development: Docker Compose&#xa;â€¢ Staging: Kubernetes&#xa;â€¢ Production: K8s + Helm&#xa;â€¢ Auto-scaling: HPA + VPA&#xa;â€¢ CI/CD: GitOps Pipeline" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FF9800;align=left;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="720" y="1360" width="160" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="security-features" value="SÃ‰CURITÃ‰ ENTERPRISE&#xa;â€¢ Authentication: JWT + SSO&#xa;â€¢ Authorization: RBAC&#xa;â€¢ Encryption: TLS 1.3&#xa;â€¢ Audit: Complete Logging&#xa;â€¢ Compliance: GDPR + SOC2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#D32F2F;align=left;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="900" y="1360" width="160" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="ai-models" value="SUPPORT MULTI-MODÃˆLES&#xa;â€¢ SothemaAI: Mistral, Llama4&#xa;â€¢ OpenAI: GPT-3.5, GPT-4&#xa;â€¢ Anthropic: Claude 3&#xa;â€¢ Cohere: Command, Embed&#xa;â€¢ Fallback Strategy Automatique" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8EAF6;strokeColor=#3F51B5;align=left;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1080" y="1360" width="180" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="legend" value="LÃ‰GENDE FLUX&#xa;â”â”â”â” Flux Principal&#xa;â”â”â” Flux Secondaire&#xa;â”â” Flux Monitoring&#xa;â” Flux Configuration&#xa;&#xa;ðŸŽ­ Agent Central&#xa;ðŸ“Š Monitoring&#xa;ðŸ” SÃ©curitÃ©&#xa;ðŸ¤– IA/ML Services" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#9E9E9E;align=left;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1280" y="1360" width="140" height="80" as="geometry"/>
        </mxCell>

        <!-- CONNECTIONS/ARROWS -->
        
        <!-- Client to Load Balancer -->
        <mxCell id="conn1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#1976D2;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="web-client" target="loadbalancer">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="conn2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#1976D2;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="mobile-client" target="loadbalancer">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Load Balancer to API Gateway -->
        <mxCell id="conn3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=4;strokeColor=#F57C00;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="loadbalancer" target="api-gateway">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- API Gateway to Orchestration Agent -->
        <mxCell id="conn4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=5;strokeColor=#7B1FA2;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="api-gateway" target="orchestrator">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Orchestration to Other Agents -->
        <mxCell id="conn5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#7B1FA2;" edge="1" parent="1" source="orchestrator" target="ingestion-agent">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="conn6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#7B1FA2;" edge="1" parent="1" source="orchestrator" target="vectorization-agent">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="conn7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#7B1FA2;" edge="1" parent="1" source="orchestrator" target="feedback-agent">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="conn8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#7B1FA2;" edge="1" parent="1" source="orchestrator" target="ai-provider">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="conn9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#7B1FA2;" edge="1" parent="1" source="orchestrator" target="storage-agent">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="conn10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#7B1FA2;" edge="1" parent="1" source="orchestrator" target="retrieval-agent">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="conn11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#7B1FA2;" edge="1" parent="1" source="orchestrator" target="synthesis-agent">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Agents to Data Layer -->
        <mxCell id="conn12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#D32F2F;" edge="1" parent="1" source="storage-agent" target="postgresql">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="conn13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#3F51B5;" edge="1" parent="1" source="vectorization-agent" target="qdrant">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="conn14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#E91E63;" edge="1" parent="1" source="retrieval-agent" target="redis">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="conn15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#00796B;" edge="1" parent="1" source="ingestion-agent" target="minio">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- AI Provider to External Services -->
        <mxCell id="conn16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=4;strokeColor=#388E3C;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ai-provider" target="sothema-ai">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="conn17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#1976D2;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ai-provider" target="openai">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="conn18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#F57C00;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ai-provider" target="anthropic">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="conn19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#9C27B0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="ai-provider" target="cohere">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Security Integration -->
        <mxCell id="conn20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#D32F2F;" edge="1" parent="1" source="api-gateway" target="security-module">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        
        <mxCell id="conn21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#F44336;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="security-module" target="keycloak">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Monitoring Connections -->
        <mxCell id="conn22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#4CAF50;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="api-gateway" target="prometheus">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Background Processing -->
        <mxCell id="conn23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#F44336;" edge="1" parent="1" source="orchestrator" target="celery-workers">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
